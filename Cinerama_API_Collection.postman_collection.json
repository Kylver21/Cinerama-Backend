{
	"info": {
		"_postman_id": "cinerama-backend-2025",
		"name": "üé¨ Cinerama Backend API",
		"description": "API completa de Cinerama - Sistema de venta de boletos de cine\n\nBase URL: https://cinerama-backend-1.onrender.com/api\n\nCredenciales de prueba:\n- Admin: admin / Admin123!\n- Cliente: cliente1 / Secret123!",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "base_url",
			"value": "https://cinerama-backend-1.onrender.com/api"
		},
		{
			"key": "token",
			"value": ""
		},
		{
			"key": "clienteId",
			"value": ""
		}
	],
	"item": [
		{
			"name": "üîê Autenticaci√≥n",
			"item": [
				{
					"name": "Login Admin",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.token) {",
									"    pm.collectionVariables.set('token', jsonData.token);",
									"    pm.collectionVariables.set('clienteId', jsonData.clienteId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"admin\",\n    \"password\": \"Admin123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Iniciar sesi√≥n como administrador"
					}
				},
				{
					"name": "Login Cliente",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.token) {",
									"    pm.collectionVariables.set('token', jsonData.token);",
									"    pm.collectionVariables.set('clienteId', jsonData.clienteId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"cliente1\",\n    \"password\": \"Secret123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Iniciar sesi√≥n como cliente"
					}
				},
				{
					"name": "Registro Usuario",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"nuevousuario\",\n    \"email\": \"nuevo@email.com\",\n    \"password\": \"Password123!\",\n    \"nombre\": \"Juan\",\n    \"apellido\": \"P√©rez\",\n    \"telefono\": \"999888777\",\n    \"documento\": \"12345678\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/registro",
							"host": ["{{base_url}}"],
							"path": ["auth", "registro"]
						},
						"description": "Registrar nuevo usuario"
					}
				}
			]
		},
		{
			"name": "üé¨ Pel√≠culas",
			"item": [
				{
					"name": "Listar Pel√≠culas",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/peliculas",
							"host": ["{{base_url}}"],
							"path": ["peliculas"]
						},
						"description": "Obtener todas las pel√≠culas"
					}
				},
				{
					"name": "Pel√≠culas Activas",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/peliculas/activas",
							"host": ["{{base_url}}"],
							"path": ["peliculas", "activas"]
						},
						"description": "Pel√≠culas actualmente en cartelera"
					}
				},
				{
					"name": "Pel√≠culas Populares",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/peliculas/populares",
							"host": ["{{base_url}}"],
							"path": ["peliculas", "populares"]
						}
					}
				},
				{
					"name": "Pel√≠cula por ID",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/peliculas/1",
							"host": ["{{base_url}}"],
							"path": ["peliculas", "1"]
						}
					}
				},
				{
					"name": "Buscar por G√©nero",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/peliculas/genero/Acci√≥n",
							"host": ["{{base_url}}"],
							"path": ["peliculas", "genero", "Acci√≥n"]
						}
					}
				},
				{
					"name": "[ADMIN] Sincronizar TMDb",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"url": {
							"raw": "{{base_url}}/peliculas/sync?paginas=1",
							"host": ["{{base_url}}"],
							"path": ["peliculas", "sync"],
							"query": [{"key": "paginas", "value": "1"}]
						},
						"description": "Sincronizar pel√≠culas desde TMDb (Solo Admin)"
					}
				}
			]
		},
		{
			"name": "üèõÔ∏è Salas",
			"item": [
				{
					"name": "Listar Salas",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/salas",
							"host": ["{{base_url}}"],
							"path": ["salas"]
						}
					}
				},
				{
					"name": "Sala por ID",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/salas/1",
							"host": ["{{base_url}}"],
							"path": ["salas", "1"]
						}
					}
				},
				{
					"name": "[ADMIN] Crear Sala",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Sala 7\",\n    \"descripcion\": \"Sala est√°ndar 2D con capacidad para 176 personas\",\n    \"capacidad\": 176,\n    \"tipo\": \"CINE_2D\",\n    \"activa\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/salas",
							"host": ["{{base_url}}"],
							"path": ["salas"]
						}
					}
				}
			]
		},
		{
			"name": "üé≠ Funciones",
			"item": [
				{
					"name": "Listar Funciones",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/funciones",
							"host": ["{{base_url}}"],
							"path": ["funciones"]
						}
					}
				},
				{
					"name": "Funciones Disponibles",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/funciones/disponibles",
							"host": ["{{base_url}}"],
							"path": ["funciones", "disponibles"]
						},
						"description": "Funciones futuras disponibles para compra"
					}
				},
				{
					"name": "Funciones por Pel√≠cula",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/funciones/pelicula/1/disponibles",
							"host": ["{{base_url}}"],
							"path": ["funciones", "pelicula", "1", "disponibles"]
						}
					}
				},
				{
					"name": "Funciones por Fecha",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/funciones/fecha/2025-12-04",
							"host": ["{{base_url}}"],
							"path": ["funciones", "fecha", "2025-12-04"]
						}
					}
				},
				{
					"name": "[ADMIN] Crear Funci√≥n",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"salaId\": 1,\n    \"peliculaId\": 1,\n    \"fechaHora\": \"2025-12-05T15:00:00\",\n    \"asientosTotales\": 176,\n    \"precioEntrada\": 16.00\n}"
						},
						"url": {
							"raw": "{{base_url}}/funciones",
							"host": ["{{base_url}}"],
							"path": ["funciones"]
						}
					}
				}
			]
		},
		{
			"name": "ü™ë Asientos",
			"item": [
				{
					"name": "Mapa de Asientos",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/asientos/funcion/2",
							"host": ["{{base_url}}"],
							"path": ["asientos", "funcion", "2"]
						},
						"description": "Obtener todos los asientos de una funci√≥n"
					}
				},
				{
					"name": "Estad√≠sticas de Funci√≥n",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/asientos/estadisticas/2",
							"host": ["{{base_url}}"],
							"path": ["asientos", "estadisticas", "2"]
						}
					}
				},
				{
					"name": "Reservar Asiento",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"url": {
							"raw": "{{base_url}}/asientos/reservar/179",
							"host": ["{{base_url}}"],
							"path": ["asientos", "reservar", "179"]
						},
						"description": "Reservar asiento temporalmente (15 min)"
					}
				},
				{
					"name": "Liberar Asiento",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"url": {
							"raw": "{{base_url}}/asientos/liberar/179",
							"host": ["{{base_url}}"],
							"path": ["asientos", "liberar", "179"]
						}
					}
				}
			]
		},
		{
			"name": "üçø Productos",
			"item": [
				{
					"name": "Listar Productos",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/productos",
							"host": ["{{base_url}}"],
							"path": ["productos"]
						}
					}
				},
				{
					"name": "Producto por ID",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/productos/1",
							"host": ["{{base_url}}"],
							"path": ["productos", "1"]
						}
					}
				},
				{
					"name": "[ADMIN] Crear Producto",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nombre\": \"Combo Personal\",\n    \"descripcion\": \"Canchita mediana + Gaseosa mediana\",\n    \"categoria\": \"COMBO\",\n    \"precio\": 18.50,\n    \"stock\": 100,\n    \"activo\": true,\n    \"imagenUrl\": \"https://ejemplo.com/imagen.jpg\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/productos",
							"host": ["{{base_url}}"],
							"path": ["productos"]
						}
					}
				}
			]
		},
		{
			"name": "üõí Compras",
			"item": [
				{
					"name": "Calcular Total",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"funcionId\": 2,\n    \"asientoIds\": [179, 180],\n    \"productos\": [\n        { \"productoId\": 1, \"cantidad\": 1 }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/compras/calcular-total",
							"host": ["{{base_url}}"],
							"path": ["compras", "calcular-total"]
						},
						"description": "Calcular el total antes de confirmar"
					}
				},
				{
					"name": "Confirmar Compra (Sin Productos)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clienteId\": {{clienteId}},\n    \"funcionId\": 2,\n    \"asientoIds\": [179, 180],\n    \"metodoPago\": \"YAPE\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/compras/confirmar",
							"host": ["{{base_url}}"],
							"path": ["compras", "confirmar"]
						},
						"description": "Confirmar compra solo con boletos"
					}
				},
				{
					"name": "Confirmar Compra (Con Productos)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [{"key": "token", "value": "{{token}}"}]
						},
						"method": "POST",
						"header": [{"key": "Content-Type", "value": "application/json"}],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"clienteId\": {{clienteId}},\n    \"funcionId\": 2,\n    \"asientoIds\": [181, 182],\n    \"metodoPago\": \"TARJETA\",\n    \"productos\": [\n        { \"productoId\": 1, \"cantidad\": 1 },\n        { \"productoId\": 2, \"cantidad\": 2 }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/compras/confirmar",
							"host": ["{{base_url}}"],
							"path": ["compras", "confirmar"]
						},
						"description": "Confirmar compra con boletos y productos"
					}
				}
			]
		},
		{
			"name": "üéûÔ∏è TMDb (Pel√≠culas Externas)",
			"item": [
				{
					"name": "En Cartelera",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/tmdb/en-cartelera",
							"host": ["{{base_url}}"],
							"path": ["tmdb", "en-cartelera"]
						}
					}
				},
				{
					"name": "Pr√≥ximamente",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/tmdb/proximamente",
							"host": ["{{base_url}}"],
							"path": ["tmdb", "proximamente"]
						}
					}
				},
				{
					"name": "Populares",
					"request": {
						"method": "GET",
						"url": {
							"raw": "{{base_url}}/tmdb/populares",
							"host": ["{{base_url}}"],
							"path": ["tmdb", "populares"]
						}
					}
				}
			]
		}
	]
}
